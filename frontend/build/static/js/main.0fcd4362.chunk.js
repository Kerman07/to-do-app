(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{41:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n(20),s=n.n(c),o=(n(41),n(8)),i=n(14),u=n(4),l=n(6),d=n(2),j=n.n(d),b=n(5),p=n(13),m=n.n(p),O=function(){var e=Object(b.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("/api/todos/");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/todos/",{content:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(b.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.put("/api/todos/".concat(t,"/"),{content:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.delete("/api/todos/".concat(t,"/"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v={createTodo:f,editTodo:h,getTodos:O,removeTodo:x},g=function(e){return function(){var t=Object(b.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.createTodo(e);case 2:r=t.sent,n({type:"ADD_TODO",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TODOS":return t.data;case"ADD_TODO":return e.concat(t.data);case"EDIT_TODO":return e.map((function(e){return e.id!==t.data.id?e:t.data}));case"DELETE_TODO":return e.filter((function(e){return e.id!==t.data.id}));default:return e}},w=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,e.prev=1,e.next=4,m.a.post("/api-token-auth/",{username:n,password:r});case 4:return a=e.sent,localStorage.setItem("REACT_TOKEN_AUTH","Token "+a.data.token),localStorage.setItem("LOGGED_USER",n),e.abrupt("return",a.data);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{token:""});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(b.a)(j.a.mark((function e(t){var n,r,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.email,a=t.password,e.prev=1,e.next=4,m.a.post("/user/register/",{username:n,email:r,password:a});case 4:return e.abrupt("return",{username:n,password:a});case 7:if(e.prev=7,e.t0=e.catch(1),!(c=e.t0.response.data).username){e.next=12;break}return e.abrupt("return",{error:"username: "+c.username});case 12:if(!c.email){e.next=14;break}return e.abrupt("return",{error:"email: "+c.email[0]});case 14:if(!c.password){e.next=16;break}return e.abrupt("return",{error:c.password[0]});case 16:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),y={createUser:T,loginUser:w},E=n(0),k=Object(l.b)((function(e){return{notification:e.notification}}))((function(e){return""!==e.notification?Object(E.jsx)("div",{className:"notif",children:e.notification}):null})),S=function(e,t){return function(){var n=Object(b.a)(j.a.mark((function n(a){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a({type:"SET_NOTIFICATION",data:{content:e}}),clearTimeout(r),r=setTimeout((function(){return a({type:"SET_NOTIFICATION",data:{content:""}})}),t);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"SET_NOTIFICATION"===t.type?t.data.content:e},I=function(e){var t=e.setRerender,n=Object(a.useState)(""),r=Object(o.a)(n,2),c=r[0],s=r[1],d=Object(a.useState)(""),p=Object(o.a)(d,2),m=p[0],O=p[1],f=Object(u.g)(),h=Object(l.c)(),x=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,y.loginUser({username:c,password:m});case 3:""!==e.sent.token?(t("r"),f.push("/home")):(h(S("Username or password are not correct!",5e3)),t("c"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(E.jsx)(E.Fragment,{children:Object(E.jsx)("div",{className:"container mt-5",children:Object(E.jsxs)("div",{className:"col-6 container",children:[Object(E.jsx)("legend",{className:"border-bottom mb-4",children:"Log In"}),Object(E.jsxs)("form",{onSubmit:x,children:[Object(E.jsx)("div",{className:"form-group",children:Object(E.jsxs)("label",{className:"custom-field",children:[Object(E.jsx)("input",{type:"text",id:"username",onChange:function(e){return s(e.target.value)},required:!0}),Object(E.jsx)("span",{className:"placeholder",children:"Username:"})]})}),Object(E.jsx)("div",{className:"form-group",children:Object(E.jsxs)("label",{className:"custom-field",children:[Object(E.jsx)("input",{type:"password",id:"password",onChange:function(e){return O(e.target.value)},required:!0}),Object(E.jsx)("span",{className:"placeholder",children:"Password:"})]})}),Object(E.jsx)(k,{}),Object(E.jsx)("div",{className:"form-group",children:Object(E.jsx)("button",{className:"btn btn-success",style:{display:"inline",float:"none"},type:"submit",children:"Log In"})})]}),Object(E.jsx)("div",{className:"border-top pt3",children:Object(E.jsxs)("small",{className:"text-muted",children:["Don't have an account?"," ",Object(E.jsx)(i.b,{className:"ml-2",to:"/register",children:"Sign Up"})]})})]})})})},R=function(e){var t=e.item,n=e.setRerender,r=Object(a.useState)(!1),c=Object(o.a)(r,2),s=c[0],i=c[1],u=Object(a.useState)(""),d=Object(o.a)(u,2),p=d[0],m=d[1],O=Object(l.c)();return Object(E.jsx)(E.Fragment,{children:s?Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{className:"col-8 align-middle",children:Object(E.jsx)("input",{type:"text",onChange:function(e){return m(e.target.value)},placeholder:t.content,style:{width:"80%"},required:!0})}),Object(E.jsx)("td",{children:Object(E.jsx)("button",{className:"btn btn-sm btn-outline-primary",name:"edit",onClick:function(){O(function(e,t){return function(){var n=Object(b.a)(j.a.mark((function n(r){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.editTodo(e,t);case 2:a=n.sent,r({type:"EDIT_TODO",data:a});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t.id,p)).then((function(){n("edt"),i(!s)}))},children:"Submit"})}),Object(E.jsx)("td",{children:Object(E.jsx)("button",{className:"btn btn-sm btn-outline-danger",name:"cancel",onClick:function(){return i(!s)},children:"Cancel"})})]}):Object(E.jsxs)("tr",{children:[Object(E.jsx)("td",{className:"col-8 align-middle",children:t.content}),Object(E.jsx)("td",{children:Object(E.jsx)("button",{className:"btn btn-sm btn-outline-primary item-btn",onClick:function(){return i(!s)},children:"Edit"})}),Object(E.jsx)("td",{children:Object(E.jsx)("button",{className:"btn btn-sm btn-outline-danger",name:"delete",onClick:function(){var e;O((e=t.id,function(){var t=Object(b.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.removeTodo(e);case 2:n({type:"DELETE_TODO",data:e});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())).then((function(){n("dut")}))},children:"Delete"})})]})})},_=function(e){var t=e.setRerender,n=Object(l.d)((function(e){return e.todos}));return Object(E.jsx)("table",{className:"table table-striped",children:Object(E.jsx)("tbody",{children:n.map((function(e){return Object(E.jsx)(R,{item:e,setRerender:t},e.id)}))})})},C=function(e){var t=e.setRerender,n=Object(a.useState)(""),r=Object(o.a)(n,2),c=r[0],s=r[1],i=Object(l.c)(),u=function(){var e=Object(b.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),i(g(c)),s(""),t("nt");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(E.jsx)("div",{children:Object(E.jsx)("form",{onSubmit:u,children:Object(E.jsxs)("div",{className:"flexbox",children:[Object(E.jsxs)("label",{className:"custom-field new-todo",children:[Object(E.jsx)("input",{type:"text",id:"todo",onChange:function(e){return s(e.target.value)},value:c,required:!0}),Object(E.jsx)("span",{className:"placeholder",children:"New Todo:"})]}),Object(E.jsx)("button",{className:"btn btn-success create-btn new-todo",type:"submit",children:"Create"})]})})})},U=function(e){var t=e.setRerender;return Object(E.jsx)(E.Fragment,{children:localStorage.getItem("REACT_TOKEN_AUTH")?Object(E.jsxs)("div",{children:[Object(E.jsxs)("div",{className:"navbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(E.jsxs)("div",{children:["Welcome ",localStorage.getItem("LOGGED_USER"),","]}),Object(E.jsx)("button",{className:"btn btn-sm btn-link",onClick:function(){localStorage.removeItem("REACT_TOKEN_AUTH"),localStorage.removeItem("LOGGED_USER"),t("c")},children:"Logout"})]}),Object(E.jsx)(C,{setRerender:t}),Object(E.jsx)(_,{setRerender:t})]}):Object(E.jsx)(u.a,{to:"/"})})},A=function(e){e.setRerender;var t=Object(a.useState)(""),n=Object(o.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),d=Object(o.a)(s,2),p=d[0],m=d[1],O=Object(a.useState)(""),f=Object(o.a)(O,2),h=f[0],x=f[1],v=Object(l.c)(),g=Object(u.g)(),N=function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,y.createUser({username:r,email:p,password:h});case 3:if(!("error"in(n=e.sent))){e.next=8;break}v(S(n.error,5e3)),e.next=11;break;case 8:return e.next=10,y.loginUser({username:n.username,password:n.password});case 10:g.push("/home");case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(E.jsx)("div",{className:"container mt-5",children:Object(E.jsxs)("div",{className:"col-6 container",children:[Object(E.jsx)("legend",{className:"border-bottom mb-4",children:"Register"}),Object(E.jsxs)("form",{onSubmit:N,children:[Object(E.jsx)("div",{className:"form-group",children:Object(E.jsxs)("label",{className:"custom-field",children:[Object(E.jsx)("input",{type:"text",id:"username",onChange:function(e){return c(e.target.value)},required:!0}),Object(E.jsx)("span",{className:"placeholder",children:"Username:"})]})}),Object(E.jsx)("div",{className:"form-group",children:Object(E.jsxs)("label",{className:"custom-field",children:[Object(E.jsx)("input",{type:"text",id:"email",onChange:function(e){return m(e.target.value)},required:!0}),Object(E.jsx)("span",{className:"placeholder",children:"Email:"})]})}),Object(E.jsx)("div",{className:"form-group",children:Object(E.jsxs)("label",{className:"custom-field",children:[Object(E.jsx)("input",{type:"password",id:"password",onChange:function(e){return x(e.target.value)},required:!0}),Object(E.jsx)("span",{className:"placeholder",children:"Password:"})]})}),Object(E.jsx)(k,{}),Object(E.jsx)("div",{className:"form-group",children:Object(E.jsx)("button",{className:"btn btn-success",type:"submit",children:"Register"})})]}),Object(E.jsx)("div",{className:"border-top pt3",children:Object(E.jsxs)("small",{className:"text-muted",children:["Already have an account?"," ",Object(E.jsx)(i.b,{className:"ml-2",to:"/login",children:"Log In"})]})})]})})},G=function(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(l.c)();return Object(a.useEffect)((function(){localStorage.getItem("LOGGED_USER")&&(m.a.defaults.headers.common.Authorization=localStorage.getItem("REACT_TOKEN_AUTH"),c(function(){var e=Object(b.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getTodos();case 2:n=e.sent,t({type:"GET_TODOS",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[n,c]),Object(E.jsx)("div",{children:Object(E.jsx)(i.a,{children:Object(E.jsxs)(u.d,{children:[Object(E.jsx)(u.b,{path:"/home",children:Object(E.jsx)(U,{setRerender:r})}),Object(E.jsx)(u.b,{path:"/register",children:Object(E.jsx)(A,{setRerender:r})}),Object(E.jsx)(u.b,{path:"/",children:Object(E.jsx)(I,{setRerender:r})})]})})})},L=n(17),q=n(36),F=n(35),H=Object(L.combineReducers)({todos:N,notification:D}),K=Object(L.createStore)(H,Object(F.composeWithDevTools)(Object(L.applyMiddleware)(q.a)));s.a.render(Object(E.jsx)(l.a,{store:K,children:Object(E.jsx)(G,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.0fcd4362.chunk.js.map